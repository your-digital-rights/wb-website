{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "https://whiteboar.com/schemas/onboarding-form-data.json",
  "title": "OnboardingFormData",
  "description": "Complete onboarding form data stored in the form_data field of the onboarding_submissions table. Represents all data collected across the 14-step onboarding wizard.",
  "type": "object",
  "properties": {
    "firstName": {
      "type": "string",
      "description": "User's first name (Step 1: Welcome & Basic Info)",
      "minLength": 2,
      "maxLength": 50,
      "pattern": "^[a-zA-ZÀ-ÿ\\s'.-]+$"
    },
    "lastName": {
      "type": "string",
      "description": "User's last name (Step 1: Welcome & Basic Info)",
      "minLength": 2,
      "maxLength": 50,
      "pattern": "^[a-zA-ZÀ-ÿ\\s'.-]+$"
    },
    "email": {
      "type": "string",
      "description": "User's email address used for account and verification (Step 1: Welcome & Basic Info)",
      "format": "email",
      "minLength": 1
    },
    "emailVerified": {
      "type": "boolean",
      "description": "Whether the user's email has been verified via 6-digit code (Step 2: Email Verification)"
    },
    "businessName": {
      "type": "string",
      "description": "Official business/company name (Step 3: Business Basics)",
      "minLength": 2,
      "maxLength": 50
    },
    "businessEmail": {
      "type": "string",
      "description": "Business contact email address (Step 3: Business Basics)",
      "format": "email",
      "minLength": 1
    },
    "businessPhone": {
      "type": "string",
      "description": "Business phone number in international format (Step 3: Business Basics)",
      "pattern": "^\\+?\\d{1,15}$"
    },
    "businessStreet": {
      "type": "string",
      "description": "Business street address (Step 3: Business Basics)",
      "minLength": 1
    },
    "businessCity": {
      "type": "string",
      "description": "Business city (Step 3: Business Basics)",
      "minLength": 1
    },
    "businessProvince": {
      "type": "string",
      "description": "Business province/state (Step 3: Business Basics)",
      "minLength": 1
    },
    "businessPostalCode": {
      "type": "string",
      "description": "Italian postal code - 5 digits (Step 3: Business Basics)",
      "pattern": "^\\d{5}$"
    },
    "businessCountry": {
      "type": "string",
      "description": "Business country, defaults to Italy (Step 3: Business Basics)",
      "default": "Italy"
    },
    "businessPlaceId": {
      "type": "string",
      "description": "Google Places API ID for address autocomplete (Step 3: Business Basics)"
    },
    "industry": {
      "type": "string",
      "description": "Business industry/sector selected from predefined list or 'Other' (Step 3: Business Basics)",
      "minLength": 1
    },
    "customIndustry": {
      "type": "string",
      "description": "Custom industry text when 'Other' is selected - temporary field that gets merged into industry (Step 3: Business Basics)"
    },
    "vatNumber": {
      "type": "string",
      "description": "Italian VAT number (Partita IVA) - format: IT followed by 11 digits (Step 3: Business Basics)",
      "pattern": "^(IT\\d{11})?$"
    },
    "businessDescription": {
      "type": "string",
      "description": "Description of what the business offers, its unique value proposition (Step 4: Brand Definition)",
      "minLength": 50,
      "maxLength": 500
    },
    "competitorUrls": {
      "type": "array",
      "description": "URLs to competitor websites for reference (Step 4: Brand Definition)",
      "items": {
        "type": "string",
        "format": "uri"
      },
      "maxItems": 3
    },
    "competitorAnalysis": {
      "type": "string",
      "description": "Optional analysis of how the business differs from competitors (Step 4: Brand Definition)",
      "maxLength": 400
    },
    "customerProfile": {
      "type": "object",
      "description": "5 slider values (0-100) defining the ideal customer persona (Step 5: Customer Profile)",
      "properties": {
        "budget": {
          "type": "number",
          "description": "Budget-Conscious (0) to Premium (100)",
          "minimum": 0,
          "maximum": 100
        },
        "style": {
          "type": "number",
          "description": "Traditional (0) to Modern (100)",
          "minimum": 0,
          "maximum": 100
        },
        "motivation": {
          "type": "number",
          "description": "Practical Solutions (0) to Experience (100)",
          "minimum": 0,
          "maximum": 100
        },
        "decisionMaking": {
          "type": "number",
          "description": "Spontaneous (0) to Researches Thoroughly (100)",
          "minimum": 0,
          "maximum": 100
        },
        "loyalty": {
          "type": "number",
          "description": "Price-Driven (0) to Brand-Loyal (100)",
          "minimum": 0,
          "maximum": 100
        }
      },
      "required": ["budget", "style", "motivation", "decisionMaking", "loyalty"]
    },
    "customerProblems": {
      "type": "string",
      "description": "Description of problems/pain points the business solves for customers (Step 6: Customer Needs)",
      "minLength": 30,
      "maxLength": 400
    },
    "customerDelight": {
      "type": "string",
      "description": "What makes customers happy/delighted about the business (Step 6: Customer Needs)",
      "maxLength": 400
    },
    "websiteReferences": {
      "type": "array",
      "description": "URLs to websites the user likes for visual inspiration (Step 7: Visual Inspiration)",
      "items": {
        "type": "string",
        "format": "uri"
      },
      "maxItems": 3,
      "default": []
    },
    "designStyle": {
      "type": "string",
      "description": "Selected visual design style for the website (Step 8: Design Style Selection)",
      "enum": ["minimalist", "corporate", "playful", "bold", "editorial", "retro"],
      "enumDescriptions": {
        "minimalist": "Clean, simple, lots of whitespace",
        "corporate": "Professional, structured, business-focused",
        "playful": "Fun, colorful, energetic",
        "bold": "Strong typography, high contrast, impactful",
        "editorial": "Magazine-like, content-focused, sophisticated",
        "retro": "Vintage-inspired, nostalgic aesthetic"
      }
    },
    "imageStyle": {
      "type": "string",
      "description": "Preferred style for images and illustrations (Step 9: Image Style Selection)",
      "enum": ["photorealistic", "flat-illustration", "line-art", "sketch", "collage", "3d"],
      "enumDescriptions": {
        "photorealistic": "Real photography or hyper-realistic renders",
        "flat-illustration": "Modern flat design illustrations",
        "line-art": "Simple line drawings and outlines",
        "sketch": "Hand-drawn, sketchy aesthetic",
        "collage": "Mixed media, layered compositions",
        "3d": "Three-dimensional renders and graphics"
      }
    },
    "colorPalette": {
      "type": "array",
      "description": "Array of hex color values. Order: [background, primary, secondary, accent, ...additional] (Step 10: Color Palette)",
      "items": {
        "type": "string",
        "pattern": "^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$",
        "description": "Hex color code in #RRGGBB or #RGB format"
      },
      "maxItems": 10,
      "default": []
    },
    "websiteSections": {
      "type": "array",
      "description": "Selected website sections/pages to include (Step 11: Website Structure)",
      "items": {
        "type": "string",
        "enum": ["hero", "contact", "about", "portfolio", "services", "testimonials", "events"]
      },
      "minItems": 1,
      "uniqueItems": true
    },
    "primaryGoal": {
      "type": "string",
      "description": "The main action visitors should take on the website (Step 11: Website Structure)",
      "enum": ["phone-call", "contact-form", "visit-location", "purchase", "other"],
      "enumDescriptions": {
        "phone-call": "Call the business",
        "contact-form": "Fill out a contact form",
        "visit-location": "Visit the physical location",
        "purchase": "Make a purchase",
        "other": "Other custom action"
      }
    },
    "offeringType": {
      "type": "string",
      "description": "Type of offerings the business provides (Step 11: Website Structure)",
      "enum": ["products", "services", "both"],
      "enumDescriptions": {
        "products": "Physical or digital goods",
        "services": "Consulting, support, maintenance, etc.",
        "both": "Combination of products and services"
      }
    },
    "products": {
      "type": "array",
      "description": "Array of products/services with photos (Step 11: Enhanced Products & Services Entry)",
      "items": {
        "$ref": "#/$defs/Product"
      },
      "maxItems": 6,
      "default": []
    },
    "logoUpload": {
      "$ref": "#/$defs/UploadedFile",
      "description": "Uploaded business logo file (Step 12: Business Assets)"
    },
    "businessPhotos": {
      "type": "array",
      "description": "Uploaded photos of the business, products, team, etc. (Step 12: Business Assets)",
      "items": {
        "$ref": "#/$defs/UploadedFile"
      },
      "maxItems": 30,
      "default": []
    },
    "additionalLanguages": {
      "type": "array",
      "description": "Additional languages for website translation beyond English and Italian (Step 13: Language Add-ons). Each language costs €75 one-time.",
      "items": {
        "type": "string",
        "description": "ISO 639-1 language code",
        "enum": [
          "nl", "fr", "de", "pt", "es", "da", "fi", "no", "sv",
          "bg", "cs", "hu", "pl", "ro", "sk", "uk", "sq", "bs",
          "hr", "el", "sr", "sl", "tr", "ca", "lv", "lt"
        ]
      },
      "uniqueItems": true,
      "default": []
    },
    "discountCode": {
      "type": "string",
      "description": "Optional promotional discount code (Step 14: Payment)",
      "maxLength": 50,
      "pattern": "^[A-Za-z0-9\\-_]*$"
    },
    "acceptTerms": {
      "type": "boolean",
      "description": "Whether user accepted terms and conditions (Step 14: Payment)"
    },
    "completedAt": {
      "type": "string",
      "description": "ISO 8601 timestamp when the onboarding was completed",
      "format": "date-time"
    },
    "totalTimeSeconds": {
      "type": "integer",
      "description": "Total time in seconds spent completing the onboarding flow",
      "minimum": 0
    }
  },
  "required": [
    "firstName",
    "lastName",
    "email",
    "emailVerified",
    "businessName",
    "businessEmail",
    "businessPhone",
    "businessStreet",
    "businessCity",
    "businessProvince",
    "businessPostalCode",
    "businessCountry",
    "industry",
    "businessDescription",
    "customerProfile",
    "customerProblems",
    "designStyle",
    "imageStyle",
    "websiteSections",
    "primaryGoal"
  ],
  "$defs": {
    "UploadedFile": {
      "type": "object",
      "description": "Metadata for an uploaded file stored in Supabase Storage",
      "properties": {
        "id": {
          "type": "string",
          "format": "uuid",
          "description": "Unique identifier for the uploaded file"
        },
        "fileName": {
          "type": "string",
          "description": "Original filename",
          "minLength": 1
        },
        "fileSize": {
          "type": "integer",
          "description": "File size in bytes",
          "minimum": 1,
          "maximum": 10485760,
          "examples": [1048576]
        },
        "mimeType": {
          "type": "string",
          "description": "MIME type of the file",
          "enum": ["image/jpeg", "image/png", "image/webp"]
        },
        "url": {
          "type": "string",
          "format": "uri",
          "description": "Public URL to access the file"
        },
        "path": {
          "type": "string",
          "description": "Storage path for file deletion (e.g., 'product-photo/file.jpg')"
        },
        "width": {
          "type": "integer",
          "description": "Image width in pixels",
          "minimum": 1
        },
        "height": {
          "type": "integer",
          "description": "Image height in pixels",
          "minimum": 1
        },
        "uploadedAt": {
          "type": "string",
          "format": "date-time",
          "description": "ISO 8601 timestamp when the file was uploaded"
        }
      },
      "required": ["id", "fileName", "fileSize", "mimeType", "url", "uploadedAt"]
    },
    "Product": {
      "type": "object",
      "description": "A product or service entry with photos",
      "properties": {
        "id": {
          "type": "string",
          "format": "uuid",
          "description": "Unique identifier (UUID v4, client-generated)"
        },
        "name": {
          "type": "string",
          "description": "Product/service name",
          "minLength": 3,
          "maxLength": 50
        },
        "description": {
          "type": "string",
          "description": "Brief product/service description",
          "minLength": 10,
          "maxLength": 100
        },
        "price": {
          "type": "number",
          "description": "Price in euros (optional)",
          "minimum": 0,
          "exclusiveMinimum": 0,
          "multipleOf": 0.01,
          "examples": [29.99, 150.00]
        },
        "photos": {
          "type": "array",
          "description": "Product photos (max 5)",
          "items": {
            "$ref": "#/$defs/UploadedFile"
          },
          "maxItems": 5,
          "default": []
        },
        "displayOrder": {
          "type": "integer",
          "description": "Display order in product list (0-based)",
          "minimum": 0
        },
        "createdAt": {
          "type": "string",
          "format": "date-time",
          "description": "ISO 8601 timestamp when product was created"
        },
        "updatedAt": {
          "type": "string",
          "format": "date-time",
          "description": "ISO 8601 timestamp when product was last modified"
        }
      },
      "required": ["id", "name", "description", "photos", "displayOrder", "createdAt", "updatedAt"]
    }
  },
  "additionalProperties": false
}
